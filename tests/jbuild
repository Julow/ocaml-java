(jbuild_version 1)
(executable
 ((name test_camljava)
  (modules (test_camljava))
  (libraries (camljava test_caml test_ppx test_java))))

(executable
 ((name test_javacaml)
  (modules (test_javacaml))
  (libraries (javacaml test_caml test_ppx test_java))
  (modes ((native shared_object)))))

(alias
 ((name runtest)
  (deps (../srcs/java/ocaml-java.jar test_java/test_javacaml.jar))
  (action (run ${exe:test_camljava.exe} ${^}))))

(alias
 ((name runtest)
  (action
   (setenv CLASSPATH "${path:test_java/test_javacaml.jar}:${path:../srcs/java/ocaml-java.jar}"
   (run java -ea ocamljava.test.TestJava ${path:test_javacaml.so})))))
